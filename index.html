<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Monarch 2.1</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.5.0/chart.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/15.2.11/Tone.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-image: linear-gradient(180deg, #1a2333, #111827);
            min-height: 100vh;
        }

        /* --- Typography & Effects --- */
        .text-glow {
            text-shadow: 0 0 8px rgba(99, 102, 241, 0.8), 0 0 20px rgba(99, 102, 241, 0.5);
        }

        /* --- Components: Cards --- */
        .card-bg {
            background-image: linear-gradient(145deg, #2c3a4b, #1f2937);
            border: 1px solid #4b5563;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }
        .card-bg:hover {
            border-color: rgba(99, 102, 241, 0.7);
            box-shadow: 0 0 20px rgba(99, 102, 241, 0.25);
        }

        /* --- Components: Buttons --- */
        .btn-primary {
            background-color: #4f46e5;
            transition: all 0.3s ease;
        }
        .btn-primary:hover {
            background-color: #6366f1;
            box-shadow: 0 0 15px rgba(99, 102, 241, 0.7);
        }
        .btn-secondary {
            background-color: #374151;
            transition: all 0.3s ease;
        }
        .btn-secondary:hover {
            background-color: #4b5563;
        }

        /* --- Components: Navigation --- */
        .nav-btn {
            transition: all 0.2s ease;
        }
        .nav-btn.active {
            background-color: #4f46e5;
            color: white;
        }
        .nav-btn:not(.active):hover {
            background-color: #374151;
        }

        /* --- Animations & Transitions --- */
        .progress-bar-fill {
            transition: width 0.5s ease-in-out;
        }
        .achievement-unlocked {
            animation: fadeInOut 5s forwards;
        }
        .pr-animation {
            animation: pr-pop-in-out 4s ease-in-out forwards;
        }
        @keyframes pr-pop-in-out {
            0%, 100% { opacity: 0; transform: translate(-50%, -50%) scale(0.5); }
            10% { opacity: 1; transform: translate(-50%, -50%) scale(1.1); }
            20%, 80% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        }
        @keyframes fadeInOut {
            0%, 100% { opacity: 0; transform: translateY(20px); }
            10%, 90% { opacity: 1; transform: translateY(0); }
        }

        .page {
            display: none;
        }
        .page.active {
            display: block;
            animation: fadeIn 0.4s ease-in-out forwards;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .spinner {
            border-top-color: #6366f1;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* --- Components: Workout Page --- */
        .set-completed > span {
            text-decoration: line-through;
            color: #6b7280; /* gray-500 */
        }

        /* --- Components: Achievements --- */
        .chart-toggle-btn {
            transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out;
            color: #9ca3af; /* gray-400 */
        }
        .chart-toggle-btn.active {
            background-color: #374151; /* gray-700 */
            color: #fff;
        }
        .achievement-unlocked-glow {
            box-shadow: 0 0 15px rgba(129, 140, 248, 0.5), 0 0 5px rgba(199, 210, 254, 0.7);
            border-color: rgba(129, 140, 248, 0.8);
        }

        /* --- Components: Modal --- */
        .modal.flex .modal-content {
            transform: scale(1);
            opacity: 1;
        }
        .modal-content {
            transform: scale(0.95);
            opacity: 0;
            transition: all 0.2s ease-in-out;
        }

        /* --- Components: Modal --- */
        .modal-backdrop {
            background-color: rgba(0,0,0,0.7);
        }

        /* --- Level Up Animation --- */
        .level-up-active {
            display: flex;
            animation: level-up-fade-in 0.2s ease-out forwards;
        }
        .level-up-active #level-up-content {
            animation: level-up-zoom-in 0.4s 0.1s cubic-bezier(0.25, 1, 0.5, 1) forwards,
                       level-up-stay 2s 0.5s forwards,
                       level-up-zoom-out 0.5s 2.5s ease-in forwards;
        }
        .level-up-active .bg-black\/80 {
            animation: level-up-fade-in 0.2s ease-out forwards,
                       level-up-fade-out 0.5s 2.5s ease-in forwards;
        }

        @keyframes level-up-fade-in { from { opacity: 0; } to { opacity: 1; } }
        @keyframes level-up-fade-out { from { opacity: 1; } to { opacity: 0; } }
        @keyframes level-up-zoom-in {
            from { transform: scale(0.5); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        @keyframes level-up-stay {
            from { transform: scale(1); opacity: 1; }
            to { transform: scale(1.05); opacity: 1; text-shadow: 0 0 30px rgba(253, 224, 71, 0.9); }
        }
        @keyframes level-up-zoom-out {
            from { transform: scale(1.05); opacity: 1; }
            to { transform: scale(1.5); opacity: 0; }
        }

        /* --- XP Bar Pulse --- */
        .xp-bar-pulse {
            animation: xp-pulse 0.6s 2 ease-in-out;
        }
        @keyframes xp-pulse {
            50% { filter: brightness(1.5); box-shadow: 0 0 10px #a78bfa; }
        }

        /* --- Misc --- */
        .header-bg {
            background-image: url('http://googleusercontent.com/file_content/34');
            background-size: cover;
            background-position: center 30%;
        }
    </style>
</head>
<body class="text-white">

    <div id="login-screen" class="flex flex-col items-center justify-center min-h-screen">
        <h1 class="text-4xl font-bold mb-2 text-glow text-white">Project Monarch</h1>
        <p class="text-gray-400 mb-8">Your path to unrivaled strength begins.</p>
        <button id="login-btn" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg flex items-center gap-2 transition-all duration-300">
            <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><path fill="#FFC107" d="M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24s8.955,20,20,20s20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"/><path fill="#FF3D00" d="M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"/><path fill="#4CAF50" d="M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"/><path fill="#1976D2" d="M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.082,5.571l6.19,5.238C42.02,35.622,44,30.138,44,24C44,22.659,43.862,21.35,43.611,20.083z"/></svg>
            <span>Login with Google</span>
        </button>
    </div>

    <div id="app" class="max-w-4xl mx-auto p-2 sm:p-6 md:p-8 hidden">

        <!-- Header -->
        <header class="text-center mb-6 p-6 sm:p-8 rounded-lg header-bg border-2 border-indigo-500/50">
            <h1 class="text-3xl sm:text-5xl font-black uppercase text-white text-glow tracking-wider" style="text-shadow: 0 0 10px black, 0 0 20px black;">Project Monarch</h1>
            <p class="text-sm sm:text-base text-gray-200 font-semibold" style="text-shadow: 0 0 5px black;">Your Path to Unrivaled Strength</p>
        </header>

        <!-- Navigation -->
        <nav class="flex justify-center gap-1 sm:gap-2 mb-6 flex-wrap">
            <button data-page="workout" class="nav-btn active inline-flex items-center px-3 py-2 sm:px-4 text-sm sm:text-base rounded-lg font-semibold">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 sm:mr-2"><path stroke-linecap="round" stroke-linejoin="round" d="m3.75 13.5 10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75Z"/></svg>
                <span class="hidden sm:inline">Quest</span>
            </button>
            <button data-page="dashboard" class="nav-btn inline-flex items-center px-3 py-2 sm:px-4 text-sm sm:text-base rounded-lg font-semibold">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 sm:mr-2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285Z"/></svg>
                <span class="hidden sm:inline">Dashboard</span>
            </button>
            <button data-page="architect" class="nav-btn inline-flex items-center px-3 py-2 sm:px-4 text-sm sm:text-base rounded-lg font-semibold">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 sm:mr-2"><path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"/></svg>
                <span class="hidden sm:inline">Architect</span>
            </button>
            <button data-page="calendar" class="nav-btn inline-flex items-center px-3 py-2 sm:px-4 text-sm sm:text-base rounded-lg font-semibold">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 sm:mr-2"><path stroke-linecap="round" stroke-linejoin="round" d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5m-9-6h.008v.008H12v-.008ZM12 15h.008v.008H12V15Zm0 2.25h.008v.008H12v-.008ZM9.75 15h.008v.008H9.75V15Zm0 2.25h.008v.008H9.75v-.008ZM7.5 15h.008v.008H7.5V15Zm0 2.25h.008v.008H7.5v-.008Zm6.75-4.5h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V15Zm0 2.25h.008v.008h-.008v-.008Zm2.25-4.5h.008v.008H16.5v-.008Zm0 2.25h.008v.008H16.5V15Z"/></svg>
                <span class="hidden sm:inline">Calendar</span>
            </button>
            <button data-page="log" class="nav-btn inline-flex items-center px-3 py-2 sm:px-4 text-sm sm:text-base rounded-lg font-semibold">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 sm:mr-2"><path stroke-linecap="round" stroke-linejoin="round" d="M8.25 3v1.5M4.5 8.25H3m18 0h-1.5M4.5 12H3m18 0h-1.5m-15 3.75H3m18 0h-1.5M8.25 19.5V21M12 3v1.5m0 15V21m3.75-18v1.5m0 15V21m-9-1.5h10.5a2.25 2.25 0 0 0 2.25-2.25V6.75a2.25 2.25 0 0 0-2.25-2.25H6.75A2.25 2.25 0 0 0 4.5 6.75v10.5a2.25 2.25 0 0 0 2.25 2.25Zm.75-12h9v9h-9v-9Z"/></svg>
                <span class="hidden sm:inline">System Log</span>
            </button>
            <button data-page="settings" class="nav-btn inline-flex items-center px-3 py-2 sm:px-4 text-sm sm:text-base rounded-lg font-semibold">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 sm:mr-2"><path stroke-linecap="round" stroke-linejoin="round" d="M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"/><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"/></svg>
                <span class="hidden sm:inline">Settings</span>
            </button>
        </nav>

        <!-- Main Content Area -->
        <main>
            <!-- Workout Page -->
            <div id="workout-page" class="page active">
                <!-- Player Stats -->
                <div class="grid grid-cols-2 gap-2 sm:gap-4 mb-6">
                    <div class="card-bg p-3 sm:p-4 rounded-lg text-center">
                        <p class="text-xs sm:text-sm text-gray-400 uppercase font-bold">Level</p>
                        <p id="player-level" class="text-xl sm:text-2xl font-semibold text-indigo-300">1</p>
                    </div>
                    <div class="card-bg p-3 sm:p-4 rounded-lg text-center">
                        <p class="text-xs sm:text-sm text-gray-400 uppercase font-bold">Title</p>
                        <p id="player-title" class="text-xl sm:text-2xl font-semibold text-indigo-300 truncate">The Weakest</p>
                    </div>
                    <div class="card-bg p-3 sm:p-4 rounded-lg text-center">
                        <p class="text-xs sm:text-sm text-gray-400 uppercase font-bold">Streak</p>
                        <p id="player-streak" class="text-xl sm:text-2xl font-semibold text-indigo-300"><i class="fas fa-fire"></i> 0</p>
                    </div>
                    <div class="card-bg p-3 sm:p-4 rounded-lg text-center">
                        <p class="text-xs sm:text-sm text-gray-400 uppercase font-bold">Phase</p>
                        <p id="workout-phase" class="text-xl sm:text-2xl font-semibold text-indigo-300">I</p>
                    </div>
                        <div class="card-bg p-3 sm:p-4 rounded-lg text-center">
                        <p class="text-xs sm:text-sm text-gray-400 uppercase font-bold">Mana</p>
                        <p id="player-mana" class="text-xl sm:text-2xl font-semibold text-cyan-300">0</p>
                    </div>
                </div>

                    <!-- Inventory Section -->
                    <div class="mb-6">
                        <h3 class="text-xl font-bold text-white mb-3">Inventory</h3>
                        <div id="inventory-container" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4">
                            <!-- Inventory items will be injected here -->
                        </div>
                    </div>

                <!-- XP Bar -->
                <div class="mb-6 card-bg p-4 rounded-lg">
                    <div class="flex justify-between items-center mb-1">
                        <span class="text-sm font-semibold text-indigo-300">XP</span>
                        <span id="xp-text" class="text-sm text-gray-400">0 / 100</span>
                    </div>
                    <div class="w-full bg-gray-700 rounded-full h-4">
                        <div id="xp-bar" class="bg-indigo-500 h-4 rounded-full progress-bar-fill" style="width: 0%"></div>
                    </div>
                </div>

                <!-- Gate Challenge -->
                <div id="gate-challenge-container" class="mb-6 hidden"></div>

                <!-- Daily Quest / Workout -->
                <div id="workout-container" class="card-bg p-4 sm:p-6 rounded-lg">
                    <div id="motivational-quote-container" class="mb-4 text-center p-3 bg-gray-800/50 rounded-lg border-l-4 border-indigo-500">
                        <p id="motivational-quote" class="text-sm sm:text-base text-gray-300 italic">"Loading system directive..."</p>
                    </div>
                    <h2 class="text-xl sm:text-2xl font-bold mb-1 text-glow text-indigo-400">Daily Quest</h2>
                    <p id="workout-day-title" class="text-base sm:text-lg font-semibold text-gray-300 mb-4">Loading your mission...</p>
                    <div id="quest-controls" class="mt-6 flex gap-4">
                        <button id="preview-quest-btn" class="w-full btn-secondary text-white font-bold py-3 px-4 rounded-lg">Preview Quest</button>
                        <button id="begin-quest-btn" class="w-full btn-primary text-white font-bold py-3 px-4 rounded-lg">Begin Quest</button>
                    </div>
                </div>
            </div>

            <!-- Dashboard Page -->
            <div id="dashboard-page" class="page">
                <h2 class="text-2xl sm:text-3xl font-bold text-white mb-4">Hunter Status</h2>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
                    <div class="card-bg p-3 sm:p-4 rounded-lg text-center">
                        <p class="text-xs sm:text-sm text-gray-400 uppercase font-bold">Level</p>
                        <p id="dashboard-level" class="text-xl sm:text-2xl font-semibold text-green-400">1</p>
                    </div>
                    <div class="card-bg p-3 sm:p-4 rounded-lg text-center">
                        <p class="text-xs sm:text-sm text-gray-400 uppercase font-bold">Days Trained</p>
                        <p id="dashboard-days-trained" class="text-xl sm:text-2xl font-semibold text-green-400">0</p>
                    </div>
                    <div class="card-bg p-3 sm:p-4 rounded-lg text-center">
                        <p class="text-xs sm:text-sm text-gray-400 uppercase font-bold">Phase</p>
                        <p id="dashboard-phase" class="text-xl sm:text-2xl font-semibold text-indigo-300">I</p>
                    </div>
                    <div class="card-bg p-3 sm:p-4 rounded-lg text-center">
                        <p class="text-xs sm:text-sm text-gray-400 uppercase font-bold">Mana</p>
                        <p id="dashboard-mana" class="text-xl sm:text-2xl font-semibold text-cyan-300">0</p>
                    </div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <div class="lg:col-span-1 card-bg p-6 rounded-lg text-center">
                        <!-- New Avatar Container -->
                        <div id="avatar-container" class="relative w-32 h-32 sm:w-40 sm:h-40 mx-auto mb-4 cursor-pointer group">
                            <!-- The Placeholder SVG -->
                            <div id="avatar-placeholder" class="w-full h-full rounded-full border-4 border-dashed border-gray-600 flex items-center justify-center bg-gray-700/50">
                                <svg class="w-12 h-12 text-gray-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z" />
                                </svg>
                            </div>
                            <!-- The Actual Image Tag (initially hidden) -->
                            <img id="dashboard-avatar-img" src="" alt="Player Avatar" class="hidden w-full h-full rounded-full object-cover border-4 border-indigo-500">
                            <!-- The Hover Icon -->
                            <div class="absolute inset-0 rounded-full bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity">
                                <i class="fas fa-camera text-white text-2xl"></i>
                            </div>
                        </div>
                        <input type="file" id="avatar-upload-input" class="hidden" accept="image/*">
                        <h2 id="dashboard-player-name" class="text-2xl sm:text-3xl font-bold">Player</h2>
                        <p id="dashboard-player-title" class="text-indigo-300 text-base sm:text-lg mb-4">The Weakest Hunter</p>
                        <button id="edit-name-btn" class="text-sm text-gray-400 hover:text-white"><i class="fas fa-pencil-alt mr-1"></i> Edit Name</button>
                        <hr class="my-6 border-gray-600">
                        <h3 class="text-lg sm:text-xl font-bold text-glow text-indigo-400 mb-4">Strength Stats</h3>
                        <div id="lift-stats-container" class="grid grid-cols-2 gap-4 text-center"></div>
                    </div>
                    <div class="lg:col-span-2 space-y-6">
                        <div class="card-bg p-4 sm:p-6 rounded-lg">
                            <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-2">
                                <h3 class="text-lg sm:text-xl font-bold text-glow text-indigo-400">Progress Chart</h3>
                                <div class="flex items-center gap-2">
                                    <div id="chart-metric-toggle" class="flex rounded-lg bg-gray-800 p-1">
                                        <button data-metric="weight" class="chart-toggle-btn active px-3 py-1 text-sm font-semibold rounded-md">Weight</button>
                                        <button data-metric="volume" class="chart-toggle-btn px-3 py-1 text-sm font-semibold rounded-md">Volume</button>
                                    </div>
                                    <select id="lift-select" class="bg-gray-700 border border-gray-600 rounded-lg text-white text-sm focus:ring-indigo-500 focus:border-indigo-500 p-2">
                                        <!-- Options will be populated by JS -->
                                    </select>
                                </div>
                            </div>
                            <div class="h-64">
                                <canvas id="progress-chart"></canvas>
                            </div>
                        </div>
                        <div class="card-bg p-4 sm:p-6 rounded-lg">
                            <h3 class="text-lg sm:text-xl font-bold text-glow text-indigo-400 mb-4">Achievements</h3>
                            <div id="achievements-list" class="grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Calendar Page -->
            <div id="calendar-page" class="page">
                <div class="card-bg p-4 sm:p-6 rounded-lg">
                    <h2 class="text-xl sm:text-2xl font-bold mb-4 text-glow text-indigo-400">12-Week Forecast</h2>
                    <div id="calendar-grid" class="grid grid-cols-7 gap-1 sm:gap-2 text-center"></div>
                </div>
            </div>

            <!-- System Log Page -->
            <div id="log-page" class="page">
                <div class="card-bg p-4 sm:p-6 rounded-lg">
                    <h2 class="text-xl sm:text-2xl font-bold mb-4 text-glow text-indigo-400">AI System Log</h2>
                    <div id="system-log-content" class="space-y-4">
                        <p class="text-gray-400">No entries yet. Complete a workout and run an analysis to populate the log.</p>
                    </div>
                </div>
            </div>

            <!-- Architect Page -->
            <div id="architect-page" class="page">
                <div class="card-bg p-4 sm:p-6 rounded-lg">
                    <h2 class="text-xl sm:text-2xl font-bold mb-4 text-glow text-indigo-400">The Architect</h2>
                    <p class="text-gray-400 mb-6">Design and save your own custom workout routines.</p>

                    <div class="space-y-6">
                        <!-- Create New Routine Form -->
                        <div class="card-bg border border-gray-700 p-4 rounded-lg">
                            <h3 class="text-lg font-semibold mb-3">Create New Routine</h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label for="routine-name" class="block text-sm font-medium text-gray-300 mb-1">Routine Name</label>
                                    <input type="text" id="routine-name" class="w-full bg-gray-800 border border-gray-600 rounded-lg p-2 text-white focus:ring-indigo-500 focus:border-indigo-500" placeholder="e.g., 'Hypertrophy Focus'">
                                </div>
                            </div>

                            <div id="new-routine-exercises" class="mt-4 space-y-2">
                                <!-- Dynamically added exercises will appear here -->
                            </div>

                            <div class="border-t border-gray-700 mt-4 pt-4">
                                <h4 class="text-md font-semibold mb-2">Add Exercise</h4>
                                <div class="grid grid-cols-1 md:grid-cols-4 gap-3">
                                    <select id="architect-exercise-select" class="md:col-span-2 bg-gray-800 border border-gray-600 rounded-lg p-2 text-white focus:ring-indigo-500 focus:border-indigo-500"></select>
                                    <input type="number" id="architect-sets" class="bg-gray-800 border border-gray-600 rounded-lg p-2 text-white" placeholder="Sets">
                                    <input type="text" id="architect-reps" class="bg-gray-800 border border-gray-600 rounded-lg p-2 text-white" placeholder="Reps">
                                </div>
                                <button id="architect-add-exercise-btn" class="btn-secondary w-full mt-3 py-2">Add Exercise to Routine</button>
                            </div>

                            <button id="architect-save-routine-btn" class="btn-primary w-full mt-6 py-3 font-bold uppercase">Save Routine</button>
                        </div>

                        <!-- Saved Routines List -->
                        <div class="card-bg border border-gray-700 p-4 rounded-lg">
                            <h3 class="text-lg font-semibold mb-3">Saved Routines</h3>
                            <div id="saved-routines-list" class="space-y-3">
                                <p class="text-gray-500">No custom routines saved yet.</p>
                                <!-- Saved routines will be populated here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Settings Page -->
            <div id="settings-page" class="page">
                <div class="space-y-8">
                    <!-- Deload Protocol -->
                    <div class="card-bg p-4 sm:p-6 rounded-lg">
                        <h2 class="text-xl sm:text-2xl font-bold mb-2 text-glow text-indigo-400">Deload Protocol</h2>
                        <p class="text-gray-400 mb-4">
                            Activating the Deload Protocol will reduce the working weight of your four main lifts (Squat, Bench Press, Deadlift, Overhead Press) by 10%. This is useful for starting a new training cycle or when feeling fatigued.
                        </p>
                        <button id="trigger-deload-btn" class="btn-secondary text-white font-bold py-2 px-4 rounded-lg">Trigger Deload</button>
                    </div>

                    <!-- Data Management -->
                    <div class="card-bg p-4 sm:p-6 rounded-lg">
                        <h2 class="text-xl sm:text-2xl font-bold mb-2 text-glow text-yellow-400">Data Management</h2>
                        <p class="text-gray-400 mb-4">
                            Export your progress to a file or import a previous save.
                        </p>
                        <div class="flex gap-4 mb-6">
                            <button id="export-data-btn" class="btn-secondary text-white font-bold py-2 px-4 rounded-lg flex-1">Export Data</button>
                            <button id="import-data-btn" class="btn-secondary text-white font-bold py-2 px-4 rounded-lg flex-1">Import Data</button>
                        </div>

                        <h3 class="text-lg font-semibold text-red-500">Danger Zone</h3>
                        <p class="text-gray-400 mb-4">
                            Permanently delete your account and all associated data. This action is irreversible.
                        </p>
                        <button id="delete-account-btn" class="w-full bg-red-800 hover:bg-red-700 text-white font-bold py-3 px-4 rounded-lg uppercase">Delete Account</button>
                    </div>
                </div>
            </div>
        </main>

        <input type="file" id="import-file-input" class="hidden" accept=".json">
    </div>

    <!-- Modal -->
    <div id="modal" class="fixed inset-0 z-50 items-center justify-center hidden">
        <div class="modal-backdrop fixed inset-0"></div>
        <div class="modal-content card-bg rounded-lg shadow-xl p-6 w-full max-w-md m-4 relative">
            <h3 id="modal-title" class="text-xl font-bold mb-4"></h3>
            <div id="modal-body" class="text-gray-300 mb-6 max-h-96 overflow-y-auto"></div>
            <div id="modal-actions" class="flex justify-end gap-4"></div>
        </div>
    </div>

    <!-- Achievement Unlocked Toast -->
    <div id="achievement-toast" class="fixed bottom-5 right-5 card-bg p-4 rounded-lg shadow-lg hidden achievement-unlocked border-l-4 border-indigo-500 w-11/12 max-w-xs">
        <p class="font-bold text-indigo-400"><i class="fas fa-star mr-2"></i>Achievement Unlocked!</p>
        <p id="achievement-toast-text" class="text-gray-300 text-sm"></p>
    </div>

    <!-- PR Toast -->
    <div id="pr-toast" class="fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 card-bg p-6 rounded-lg shadow-2xl hidden pr-animation border-2 border-yellow-400 w-11/12 max-w-sm text-center">
        <p class="text-2xl font-black text-yellow-300 text-glow uppercase tracking-wider">Personal Record!</p>
        <p id="pr-toast-text" class="text-gray-200 text-lg mt-2"></p>
    </div>

    <!-- Level Up Animation Overlay -->
    <div id="level-up-overlay" class="fixed inset-0 z-50 items-center justify-center hidden">
        <div class="absolute inset-0 bg-black/80"></div>
        <div id="level-up-content" class="relative text-center">
            <p class="text-2xl font-bold text-gray-400 uppercase tracking-widest">Level Up</p>
            <p id="level-up-number" class="text-9xl font-black text-yellow-300 text-glow" style="line-height: 1;">10</p>
        </div>
    </div>

    <script type="module" src="app.js"></script>
</body>
</html>
